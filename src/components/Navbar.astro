---
import ThemeSwitcher from "./ThemeSwitcher.astro";
---

<div class="navbar bg-base-500">
  <div class="navbar-start">
    <div class="dropdown">
      <button
        id="hamburger-btn"
        class="btn btn-ghost lg:hidden"
        aria-expanded="false"
        aria-controls="menu"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h8m-8 6h16"></path>
        </svg>
      </button>

      <ul
        id="menu"
        class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow hidden"
      >
        <li><a href="/">Item 1</a></li>
        <li>
          <a href="/">Parent</a>
          <ul class="p-2">
            <li><a href="/">Submenu 1</a></li>
            <li><a href="/">Submenu 2</a></li>
          </ul>
        </li>
        <li><a href="/xd">Item 3</a></li>
      </ul>
    </div>

    <a class="btn btn-ghost text-xl" href="/">Wcydtt</a>
  </div>

  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal px-1">
      <li><a href="/memes">Memes</a></li>
      <li>
        <details>
          <summary>Parent</summary>
          <ul class="p-2">
            <li><a href="/">Submenu 1</a></li>
            <li><a href="/">Submenu 2</a></li>
          </ul>
        </details>
      </li>
      <li><a href="/xd">Item 3</a></li>
    </ul>
  </div>

  <div class="navbar-end">
    <a class="btn">Button</a>
    <ThemeSwitcher />
  </div>
</div>

<!-- <script>
 
  document.addEventListener("DOMContentLoaded", () => {
    const hamburgerBtn = document.getElementById("hamburger-btn");
    const menu = document.getElementById("menu");

    hamburgerBtn?.addEventListener("click", () => {
      const isExpanded = hamburgerBtn.getAttribute("aria-expanded") === "true";
      hamburgerBtn.setAttribute("aria-expanded", isExpanded ? "false" : "true");
      menu?.classList.toggle("hidden");
    });
  });
</script> -->
<script>
  function initHamburgerMenu() {
    const hamburgerBtn = document.getElementById("hamburger-btn");
    const menu = document.getElementById("menu");

    if (hamburgerBtn && menu) {
      hamburgerBtn.addEventListener("click", () => {
        const isExpanded =
          hamburgerBtn.getAttribute("aria-expanded") === "true";
        hamburgerBtn.setAttribute(
          "aria-expanded",
          isExpanded ? "false" : "true"
        );
        menu.classList.toggle("hidden");
      });
    }
  }

  // Fallback in case `DOMContentLoaded` doesn't work in production
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initHamburgerMenu);
  } else {
    initHamburgerMenu(); // Run immediately if the DOM is already fully loaded
  }
</script>
